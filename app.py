from flask import Flask, request, render_template
from scraper import scrape
from constants import search_data

app = Flask(__name__)

"""
A function that serves as the route handler for the root URL ("/").
It renders the "index.html" template and returns the rendered HTML as a response.
Returns:
    str: The rendered HTML as a response.
"""
@app.route('/')
def home():
    return render_template('index.html')


@app.route('/cve', methods=['POST'])
def greet():
    cve_id = request.form['cve_id']

    nvd_data = scrape(search_data['NVDNIST'], cve_id)
    return render_template('searchresult.html', cve_data=nvd_data)

if __name__ == '__main__':
    app.run(debug=True)
